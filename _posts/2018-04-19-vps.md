---
title: "Using Google cloud to build a Virtual Private Server (VPS)"
classes: wide
sitemap: true
categories:
  - Blog
tags:
  - content
  - tutorial
description: Using Google cloud to build a Virtual Private Server (VPS), set up BBR and ssr
---

# set up a VPS on Google cloud
1. buy a VM on [Google cloud](https://cloud.google.com/) (it has one year free trial now)
    choose Debian Linux and the place near to get fast access (eg, `asia-east`, `asia-noutheast`)
2. use ssh connect VPS (you can use browser ssh or ssh key on terminal)
    if you use terminal ssh, please set up `gcloud` first follow this [tutorial](https://cloud.google.com/compute/docs/instances/connecting-to-instance?hl=zh-cn)
    use `gcloud compute ssh [username]` to connect VPS on terminal
3. configure you VPS
4. configure you client



Here I list two popular way to go through the special firewall, one is ssr, another is v2ray.

## set up BBR and ssr
set up BBR and ssr through script on VPS connected by ssh

```bash
sudo -i
wget --no-check-certificate https://github.com/iyuco/scripts/raw/master/bbr.sh
chmod +x bbr.sh
./bbr.sh
./shadowsocksR.sh
```
and if you want to create multi-user accounts, the following one is more convenient

```bash
wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssrmu.sh && chmod +x ssrmu.sh && bash ssrmu.sh
```

**Notice:** Don't forget set you Google cloud firewall to allow your ssr port in both http and https




## set up Linux PC client

### set up ssr
    ```
    wget http://www.djangoz.com/ssr
    sudo mv ssr /usr/local/bin
    sudo chmod 766 /usr/local/bin/ssr
    ssr install
    ssr config
    ```

## Set up v2ray client

1. synchronize you time first by 

   ```
   sudo apt-get install ntp ntpdate -y
   ntpdate 0.asia.pool.ntp.org  
   sudo hwclock -w 					# write to hardware
   date # check time
   ```

   list of time server

   ```
   time.nist.gov  
   time.nuri.net  
   0.asia.pool.ntp.org  
   1.asia.pool.ntp.org  
   2.asia.pool.ntp.org  
   3.asia.pool.ntp.org
   us.pool.ntp.org 
   ```
2. download install script 

   ```bash
   wget https://install.direct/go.sh   
   ```

3. run install and set up

   ```bash
   sudo go.sh
   ```

4. move you `config.json` file to `/etc/v2ray/` and delete the default config file

5. start v2ray

   ```bash
   sudo systemctl start v2ray
   ```

6. check status

   ```bash
   service v2ray status
   ```

### using socks on terminal

1. `sudo apt-get install privoxy`

2. edit /etc/privoxy/config, below is an example
    ```
    listen-address 127.0.0.1:8118   # in line 783
    forward-socks5 / 127.0.0.1:1080 .  # in line 1336
    ```

3. `sudo /etc/init.d/privoxy restart`

4. configure terminal environment by run or add following to `.bashrc`

    ```
    export http_proxy="127.0.0.1:8118"
    export https_proxy="127.0.0.1:8118"
    ```
5. try `wget http://www.google.com` to test.

### Chrome management
if you want to use chrome to manage your redirection, you can use `Proxy SwitchyOmega` extension.

## set up other clients
* IOS (wingy)
* Windows ([ShadowsocksR-win](https://github.com/shadowsocksr-rm/shadowsocksr-csharp))
*  MAC ([ShadowsocksX](https://github.com/shadowsocks/ShadowsocksX-NG))
* Android([shadowsocksr-android](https://github.com/milkice233/shadowsocksr-android))

__Special statement: This tutorial is only for learning and research, thanks.__

